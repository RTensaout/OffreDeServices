const dict = {
  fr: {
    nav_services: "Services",
    nav_skills: "Capacités",
    nav_pricing: "Tarifs",
    nav_portfolio: "Portfolio",
    nav_about: "À propos",
    nav_contact: "Contact",

    cta_quote: "Demander un devis",
    cta_pricing: "Voir les tarifs",
    cta_portfolio: "Portfolio",

    badge: "Disponible • Freelance / Mission",
    hero_title: "Développeur Web — Sites premium & SEO",
    hero_subtitle: "Je crée des sites rapides, élégants et responsives pour présenter vos offres et générer des clients.",

    kpi1_t: "Performance",
    kpi1_v: "Site rapide & optimisé",
    kpi2_t: "SEO",
    kpi2_v: "Structure Google-friendly",
    kpi3_t: "FR / AR",
    kpi3_v: "Bilingue pro + RTL",

    profile_role: "Développeur Web • PHP • SEO",
    pill_fast: "Rapide",

    quick_phone: "Téléphone",
    quick_city: "Ville",
    quick_city_v: "Seddouk, Algérie",

    mini1_k: "Réponse",
    mini1_v: "Rapide",
    mini2_k: "Livraison",
    mini2_v: "Dans les délais",
    mini3_k: "Qualité",
    mini3_v: "Premium",

    trust: "Design premium • Mobile • SEO • Performance • FR/AR",
    trust2: "Idéal pour entreprises, artisans, services",

    services_title: "Services",
    services_subtitle: "Un site élégant, rapide, qui convertit et inspire confiance.",
    srv1_t: "Site vitrine premium",
    srv1_p: "Design moderne, sections claires, expérience pro.",
    srv2_t: "Conversion",
    srv2_p: "CTA, WhatsApp, formulaire, structure vendeuse.",
    srv3_t: "SEO & performance",
    srv3_p: "Optimisation technique + structure Google-friendly.",

    skills_title: "Capacités",
    skills_subtitle: "Sites vitrines, tunnels de vente et projets web plus avancés (Full-Stack).",

    pricing_title: "Tarifs",
    pricing_subtitle: "Devis clair selon pages, contenu et délais.",
    from: "À partir de",
    best: "Meilleur choix",
    price_on_quote: "Sur devis",

    pr1_t: "Starter",
    pr1_tag: "1 page • rapide",
    pr1_li1: "Design premium + mobile",
    pr1_li2: "WhatsApp + formulaire",
    pr1_li3: "SEO de base",

    pr2_t: "Business",
    pr2_tag: "3–5 pages • Google",
    pr2_li1: "Pages complètes + structure",
    pr2_li2: "SEO + performance",
    pr2_li3: "Portfolio + avis + sections pro",

    pr3_t: "Pro+",
    pr3_tag: "FR/AR • premium",
    pr3_li1: "Bilingue FR/AR + RTL",
    pr3_li2: "Optimisation conversion",
    pr3_li3: "Option tracking + SEO avancé",

    pricing_note: "Dis-moi : pages, activité, contenu, délai. Je te réponds avec un devis simple et rapide.",

    portfolio_title: "Portfolio",
    portfolio_subtitle: "Ton portfolio complet est disponible en ligne.",
    pf_main_cta: "Voir tous mes projets (Portfolio)",

    about_title: "À propos",
    about_p1: "Profil rigoureux, formé en ingénierie web (INSIM/ESGI).",
    about_p2: "Expérience de stage à Paris (Paylight) : sites responsives, intégration, maintenance, qualité pro.",
    about_box_title: "Pourquoi moi ?",
    why1: "Organisation & respect des délais",
    why2: "Site rapide + responsive + pro",
    why3: "Communication claire + suivi",

    contact_title: "Contact",
    contact_subtitle: "Dis-moi ton besoin (type de site, pages, délai). Je réponds rapidement.",
    contact_fast: "Contact direct",
    contact_fast_p: "Le plus rapide : WhatsApp.",
    contact_note: "Je peux aussi proposer domaine + hébergement selon ton budget.",

    form_name: "Nom",
    form_email: "Email",
    form_need: "Votre besoin",
    form_send: "Envoyer",
    form_hint: "Le formulaire ouvre votre email avec un message prêt à envoyer (pas de backend).",

    footer_name: "Rayane Tensaout",
    footer_top: "Haut de page"
  },

  ar: {
    nav_services: "الخدمات",
    nav_skills: "القدرات",
    nav_pricing: "الأسعار",
    nav_portfolio: "الأعمال",
    nav_about: "نبذة عني",
    nav_contact: "تواصل",

    cta_quote: "اطلب عرض سعر",
    cta_pricing: "شاهد الأسعار",
    cta_portfolio: "الأعمال",

    badge: "متاح • عمل حر / مهمة",
    hero_title: "مطور ويب — مواقع احترافية وSEO",
    hero_subtitle: "أصمم مواقع سريعة وأنيقة ومتجاوبة لعرض خدماتك وجلب العملاء.",

    kpi1_t: "الأداء",
    kpi1_v: "موقع سريع ومحسّن",
    kpi2_t: "SEO",
    kpi2_v: "بنية مناسبة لـ Google",
    kpi3_t: "FR / AR",
    kpi3_v: "ثنائي اللغة + RTL",

    profile_role: "مطور ويب • PHP • SEO",
    pill_fast: "سريع",

    quick_phone: "الهاتف",
    quick_city: "المدينة",
    quick_city_v: "سيدوك، الجزائر",

    mini1_k: "الرد",
    mini1_v: "سريع",
    mini2_k: "التسليم",
    mini2_v: "في الوقت",
    mini3_k: "الجودة",
    mini3_v: "Premium",

    trust: "تصميم Premium • هاتف • SEO • أداء • FR/AR",
    trust2: "مناسب للشركات والحرفيين والخدمات",

    services_title: "الخدمات",
    services_subtitle: "موقع أنيق وسريع يجلب العملاء ويعطي ثقة.",
    srv1_t: "موقع تعريفي Premium",
    srv1_p: "تصميم حديث، أقسام واضحة، تجربة احترافية.",
    srv2_t: "تحويل العملاء",
    srv2_p: "CTA، واتساب، نموذج تواصل، هيكلة بيعية.",
    srv3_t: "SEO والأداء",
    srv3_p: "تحسين تقني + بنية مناسبة لـ Google.",

    skills_title: "القدرات",
    skills_subtitle: "مواقع تعريفية، قمع بيع، ومشاريع ويب متقدمة (Full-Stack).",

    pricing_title: "الأسعار",
    pricing_subtitle: "عرض سعر واضح حسب الصفحات والمحتوى والمدة.",
    from: "ابتداءً من",
    best: "أفضل اختيار",
    price_on_quote: "حسب الطلب",

    pr1_t: "Starter",
    pr1_tag: "صفحة واحدة • سريع",
    pr1_li1: "تصميم Premium + هاتف",
    pr1_li2: "واتساب + نموذج تواصل",
    pr1_li3: "SEO أساسي",

    pr2_t: "Business",
    pr2_tag: "3–5 صفحات • Google",
    pr2_li1: "صفحات كاملة + هيكلة",
    pr2_li2: "SEO + أداء",
    pr2_li3: "أعمال + آراء + أقسام احترافية",

    pr3_t: "Pro+",
    pr3_tag: "FR/AR • premium",
    pr3_li1: "ثنائي اللغة + RTL",
    pr3_li2: "تحسين التحويل",
    pr3_li3: "تتبع اختياري + SEO متقدم",

    pricing_note: "أرسل: عدد الصفحات، النشاط، المحتوى، المدة. سأرد بعرض سريع وواضح.",

    portfolio_title: "الأعمال",
    portfolio_subtitle: "ملف أعمالك الكامل متوفر على الإنترنت.",
    pf_main_cta: "شاهد كل أعمالي (Portfolio)",

    about_title: "نبذة عني",
    about_p1: "ملف جاد وتكوين في هندسة الويب (INSIM/ESGI).",
    about_p2: "تجربة تدريب بباريس (Paylight): مواقع متجاوبة، إدماج، صيانة، جودة احترافية.",
    about_box_title: "لماذا تختارني؟",
    why1: "تنظيم واحترام المواعيد",
    why2: "موقع سريع ومتجاوب واحترافي",
    why3: "تواصل واضح ومتابعة",

    contact_title: "تواصل",
    contact_subtitle: "اكتب احتياجك (نوع الموقع، الصفحات، المدة). سأرد بسرعة.",
    contact_fast: "تواصل مباشر",
    contact_fast_p: "الأسرع: واتساب.",
    contact_note: "أستطيع اقتراح دومين + استضافة حسب ميزانيتك.",

    form_name: "الاسم",
    form_email: "البريد الإلكتروني",
    form_need: "ماذا تحتاج؟",
    form_send: "إرسال",
    form_hint: "النموذج يفتح بريدك برسالة جاهزة (بدون سيرفر).",

    footer_name: "ريان تينساوت",
    footer_top: "أعلى الصفحة"
  }
};

let lang = "fr";

function applyLang(l){
  lang = l;
  const isAR = l === "ar";
  document.documentElement.lang = isAR ? "ar" : "fr";
  document.documentElement.dir = isAR ? "rtl" : "ltr";

  document.querySelectorAll("[data-i18n]").forEach(el=>{
    const key = el.getAttribute("data-i18n");
    if(dict[l][key]) el.textContent = dict[l][key];
  });
}

document.getElementById("langBtn").addEventListener("click", ()=>{
  applyLang(lang === "fr" ? "ar" : "fr");
});

document.getElementById("year").textContent = new Date().getFullYear();

/* Mobile menu */
const menuBtn = document.getElementById("menuBtn");
const mobileMenu = document.getElementById("mobileMenu");

menuBtn.addEventListener("click", ()=>{
  mobileMenu.classList.toggle("is-open");
  mobileMenu.setAttribute("aria-hidden", mobileMenu.classList.contains("is-open") ? "false" : "true");
});

mobileMenu.querySelectorAll("a").forEach(a=>{
  a.addEventListener("click", ()=>{
    mobileMenu.classList.remove("is-open");
    mobileMenu.setAttribute("aria-hidden", "true");
  });
});

/* Reveal on scroll */
const reveals = [...document.querySelectorAll(".reveal")];
const io = new IntersectionObserver((entries)=>{
  entries.forEach(e=>{
    if(e.isIntersecting){
      e.target.classList.add("is-visible");
      io.unobserve(e.target);
    }
  });
},{threshold:0.12});

reveals.forEach(el=>io.observe(el));

/* Form without backend -> mailto */
document.getElementById("contactForm").addEventListener("submit", (e)=>{
  e.preventDefault();
  const data = new FormData(e.target);
  const name = (data.get("name") || "").toString().trim();
  const email = (data.get("email") || "").toString().trim();
  const message = (data.get("message") || "").toString().trim();

  // Code corrigé ici
  const subject = encodeURIComponent(lang === "ar" ? "طلب عرض سعر - من الموقع" : "Demande de devis - Site Web");
  const body = encodeURIComponent(
    (lang === "ar" ? "الاسم: " : "Nom: ") + name + "\n" +
    (lang === "ar" ? "البريد: " : "Email: ") + email + "\n\n" +
    (lang === "ar" ? "الرسالة:\n" : "Message:\n") + message
  );

  window.location.href = `mailto:rayanetensaout@gmail.com?subject=${subject}&body=${body}`;
});